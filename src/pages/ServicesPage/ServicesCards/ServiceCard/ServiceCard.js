import { useEffect, useRef } from 'react';
import imgSrc1 from '../../../../assets/service1.jpeg';
import imgSrc2 from '../../../../assets/service2.jpeg';
import imgSrc3 from '../../../../assets/service3.jpeg';
import imgSrc4 from '../../../../assets/service4.jpeg';
import imgSrc5 from '../../../../assets/service5.png';
import imgSrc6 from '../../../../assets/service6.jpeg';
import imgSrc7 from '../../../../assets/service7.jpeg';
import imgSrc8 from '../../../../assets/card4.jpeg';
import imgSrc9 from '../../../../assets/service9.jpeg';
import { HashLink } from 'react-router-hash-link';
import './ServiceCard.css';

const imgArray = [imgSrc1, imgSrc2, imgSrc3, imgSrc4, imgSrc5, imgSrc6, imgSrc7, imgSrc8, imgSrc9];

const ServiceCard = ({ heading, index, currentCard, setCurrentCard }) => {

    const elem = useRef(null);

    useEffect(() => {
        const findHeight = () => {
            elem?.current?.getBoundingClientRect()?.top <= 230 && setCurrentCard(index)
        }
        window.addEventListener('scroll', findHeight)
        return () => window.removeEventListener('scroll', findHeight)
    }, [])

    return (
        <div className="service-card" ref={elem} style={{zIndex: index-1}}>
            {
                currentCard === index && <div className='service-card-heading'>
                    <h3>{heading}</h3>
                    <svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="1058.000000pt" height="1058.000000pt" viewBox="0 0 1058.000000 1058.000000" preserveAspectRatio="xMidYMid meet">
                        <defs>
                            <linearGradient id="-2" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" style={{ stopColor: '#ff7425', stopOpacity: '1' }}></stop>
                                <stop offset="100%" style={{ stopColor: '#fee95c', stopOpacity: '1' }}></stop>
                            </linearGradient>
                        </defs>
                        <g fill="url(#-2)" transform="translate(0.000000,1058.000000) scale(0.100000,-0.100000)" stroke="black">
                            <path d="M4647 10548 c-79 -126 -120 -180 -190 -251 -96 -96 -112 -109 -192 -157 -155 -94 -292 -132 -475 -133 -203 -1 -370 44 -544 145 -48 29 -60 28 -86 -3 -3 -3 -67 -47 -142 -97 -155 -104 -299 -192 -473 -288 -78 -44 -394 -200 -421 -208 -19 -6 -21 -16 -27 -129 -18 -367 -199 -667 -497 -825 -148 -79 -326 -122 -501 -122 -48 0 -69 -4 -69 -12 0 -18 -149 -322 -212 -432 -128 -225 -332 -554 -357 -576 -15 -12 -51 -70 -51 -81 0 -6 14 -35 30 -64 168 -294 182 -663 35 -940 -92 -173 -247 -331 -413 -421 -51 -28 -53 -30 -48 -64 28 -183 32 -945 6 -1145 -12 -92 -22 -76 102 -155 82 -52 222 -183 281 -263 55 -74 123 -222 148 -322 18 -71 23 -118 23 -220 0 -187 -30 -313 -116 -482 -26 -53 -48 -100 -48 -104 0 -4 30 -51 67 -103 38 -52 90 -130 117 -173 27 -43 59 -94 71 -113 24 -38 85 -142 135 -230 50 -88 230 -452 230 -465 0 -8 38 -14 123 -18 303 -15 569 -141 727 -347 19 -25 40 -51 47 -58 7 -7 13 -17 13 -22 0 -5 6 -15 13 -22 36 -39 98 -194 123 -313 9 -38 18 -121 21 -183 l6 -112 201 -99 c111 -54 257 -131 326 -171 69 -40 140 -81 159 -92 19 -11 60 -36 90 -57 31 -20 77 -49 103 -64 26 -15 53 -33 60 -40 7 -7 42 -33 78 -57 36 -24 68 -48 71 -53 4 -6 19 -2 35 10 49 34 175 90 264 116 433 131 855 -31 1111 -427 l62 -97 41 6 c250 33 935 34 1181 0 41 -6 41 -5 69 47 65 120 210 280 323 355 152 102 349 163 526 163 74 0 231 -26 305 -49 76 -25 202 -83 244 -112 29 -21 29 -21 51 -1 25 22 354 242 362 242 4 0 26 13 50 30 24 16 46 30 50 30 3 0 22 11 43 24 65 42 182 104 362 192 96 47 182 89 190 93 10 5 16 25 17 57 2 27 7 90 13 139 55 505 422 847 936 872 l121 6 19 46 c27 66 140 295 184 371 20 36 61 108 90 160 30 52 61 106 70 120 9 14 28 43 42 65 40 64 133 204 182 275 27 39 42 68 37 75 -20 24 -93 179 -112 237 -38 120 -51 200 -51 328 0 206 45 354 159 528 32 49 169 195 218 232 45 35 114 80 122 80 4 0 21 10 36 23 l28 22 -11 100 c-26 232 -23 844 5 1110 l6 50 -96 60 c-169 106 -302 252 -380 418 -64 137 -88 245 -87 397 0 182 38 336 121 492 23 43 41 83 41 91 0 7 -17 37 -37 65 -180 245 -424 663 -534 912 l-52 117 -106 6 c-182 10 -322 46 -460 119 -93 50 -138 84 -226 173 -170 171 -257 383 -272 661 l-6 111 -76 34 c-141 63 -368 181 -500 261 -34 21 -65 38 -68 38 -2 0 -24 14 -48 30 -24 17 -46 30 -50 30 -8 0 -273 177 -317 213 l-37 29 -28 -19 c-73 -50 -233 -114 -349 -138 -95 -21 -283 -23 -374 -6 -152 30 -298 96 -405 185 -116 96 -213 209 -272 318 l-27 50 -55 -7 c-311 -33 -895 -33 -1163 1 -41 5 -48 3 -61 -18z">
                            </path>
                        </g>
                    </svg>
                    <svg className="svg-backdrop" version="1.0" xmlns="http://www.w3.org/2000/svg" width="1058.000000pt" height="1058.000000pt" viewBox="0 0 1058.000000 1058.000000" preserveAspectRatio="xMidYMid meet"><g transform="translate(0.000000,1058.000000) scale(0.100000,-0.100000)" stroke="none"><path d="M4647 10548 c-79 -126 -120 -180 -190 -251 -96 -96 -112 -109 -192 -157 -155 -94 -292 -132 -475 -133 -203 -1 -370 44 -544 145 -48 29 -60 28 -86 -3 -3 -3 -67 -47 -142 -97 -155 -104 -299 -192 -473 -288 -78 -44 -394 -200 -421 -208 -19 -6 -21 -16 -27 -129 -18 -367 -199 -667 -497 -825 -148 -79 -326 -122 -501 -122 -48 0 -69 -4 -69 -12 0 -18 -149 -322 -212 -432 -128 -225 -332 -554 -357 -576 -15 -12 -51 -70 -51 -81 0 -6 14 -35 30 -64 168 -294 182 -663 35 -940 -92 -173 -247 -331 -413 -421 -51 -28 -53 -30 -48 -64 28 -183 32 -945 6 -1145 -12 -92 -22 -76 102 -155 82 -52 222 -183 281 -263 55 -74 123 -222 148 -322 18 -71 23 -118 23 -220 0 -187 -30 -313 -116 -482 -26 -53 -48 -100 -48 -104 0 -4 30 -51 67 -103 38 -52 90 -130 117 -173 27 -43 59 -94 71 -113 24 -38 85 -142 135 -230 50 -88 230 -452 230 -465 0 -8 38 -14 123 -18 303 -15 569 -141 727 -347 19 -25 40 -51 47 -58 7 -7 13 -17 13 -22 0 -5 6 -15 13 -22 36 -39 98 -194 123 -313 9 -38 18 -121 21 -183 l6 -112 201 -99 c111 -54 257 -131 326 -171 69 -40 140 -81 159 -92 19 -11 60 -36 90 -57 31 -20 77 -49 103 -64 26 -15 53 -33 60 -40 7 -7 42 -33 78 -57 36 -24 68 -48 71 -53 4 -6 19 -2 35 10 49 34 175 90 264 116 433 131 855 -31 1111 -427 l62 -97 41 6 c250 33 935 34 1181 0 41 -6 41 -5 69 47 65 120 210 280 323 355 152 102 349 163 526 163 74 0 231 -26 305 -49 76 -25 202 -83 244 -112 29 -21 29 -21 51 -1 25 22 354 242 362 242 4 0 26 13 50 30 24 16 46 30 50 30 3 0 22 11 43 24 65 42 182 104 362 192 96 47 182 89 190 93 10 5 16 25 17 57 2 27 7 90 13 139 55 505 422 847 936 872 l121 6 19 46 c27 66 140 295 184 371 20 36 61 108 90 160 30 52 61 106 70 120 9 14 28 43 42 65 40 64 133 204 182 275 27 39 42 68 37 75 -20 24 -93 179 -112 237 -38 120 -51 200 -51 328 0 206 45 354 159 528 32 49 169 195 218 232 45 35 114 80 122 80 4 0 21 10 36 23 l28 22 -11 100 c-26 232 -23 844 5 1110 l6 50 -96 60 c-169 106 -302 252 -380 418 -64 137 -88 245 -87 397 0 182 38 336 121 492 23 43 41 83 41 91 0 7 -17 37 -37 65 -180 245 -424 663 -534 912 l-52 117 -106 6 c-182 10 -322 46 -460 119 -93 50 -138 84 -226 173 -170 171 -257 383 -272 661 l-6 111 -76 34 c-141 63 -368 181 -500 261 -34 21 -65 38 -68 38 -2 0 -24 14 -48 30 -24 17 -46 30 -50 30 -8 0 -273 177 -317 213 l-37 29 -28 -19 c-73 -50 -233 -114 -349 -138 -95 -21 -283 -23 -374 -6 -152 30 -298 96 -405 185 -116 96 -213 209 -272 318 l-27 50 -55 -7 c-311 -33 -895 -33 -1163 1 -41 5 -48 3 -61 -18z"></path></g></svg>
                </div>
            }
            <img src={imgArray[index-1]} alt={heading} />
            <HashLink to='/services/#service-details' smooth>Know More  <span><i className="fas fa-arrow-right"></i></span></HashLink>
        </div>
    );
}
export default ServiceCard;